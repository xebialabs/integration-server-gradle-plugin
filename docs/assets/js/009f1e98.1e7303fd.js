"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[436],{3905:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return g}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=s(a),g=r,k=m["".concat(p,".").concat(g)]||m[g]||c[g]||i;return a?n.createElement(k,o(o({ref:t},d),{},{components:a})):n.createElement(k,o({ref:t},d))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},6154:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return d},default:function(){return m}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),o=["components"],l={sidebar_position:4},p="Configuration",s={unversionedId:"getting-started/configuration",id:"getting-started/configuration",isDocsHomePage:!1,title:"Configuration",description:"The first section level",source:"@site/docs/getting-started/configuration.md",sourceDirName:"getting-started",slug:"/getting-started/configuration",permalink:"/integration-server-gradle-plugin/docs/getting-started/configuration",version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Examples",permalink:"/integration-server-gradle-plugin/docs/getting-started/examples"},next:{title:"Tasks",permalink:"/integration-server-gradle-plugin/docs/getting-started/tasks"}},d=[{value:"The first section level",id:"the-first-section-level",children:[]},{value:"Servers section",id:"servers-section",children:[{value:"Dev Ops As Code",id:"dev-ops-as-code",children:[]},{value:"Overlays",id:"overlays",children:[]},{value:"YAML patches",id:"yaml-patches",children:[]}]},{value:"Database section",id:"database-section",children:[]},{value:"Workers section",id:"workers-section",children:[]},{value:"Satellites section",id:"satellites-section",children:[]},{value:"MQ Driver Versions",id:"mq-driver-versions",children:[]},{value:"XLD Integration Server Data Version",id:"xld-integration-server-data-version",children:[]}],c={toc:d};function m(e){var t=e.components,l=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},c,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"configuration"},"Configuration"),(0,i.kt)("h2",{id:"the-first-section-level"},"The first section level"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},"integrationServer {\n    servers {}\n    databases {}\n    workers {}\n    satellites {}\n    mqDriverVersions {}\n    xldIsDataVersion {}\n}\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"servers"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Server configurations, currently, it's possible to configure only one.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"databases"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Currently supported only 1 running database. For now you can find this section helpful for overriding database driving versions or having more database level logs.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"workers"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can configure as many workers as you need here.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"satellites"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can configure as many satellites as you need here.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"mqDriverVersions"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Points to the version of MQ to use, in case you wish to adapt it to your own version.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"xldIsDataVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("strong",{parentName:"td"},"Only for internal use in Digital.ai")," Points to the data which is going to be imported after server is booted. To run waste the time to generate a huge amount of test data.")))),(0,i.kt)("h2",{id:"servers-section"},"Servers section"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},'integrationServer {\n   servers {\n       controlPlane {\n           cliDebugPort = 4004\n           cliDebugSuspend = true\n           contextRoot = "/custom"\n           debugPort = 4005\n           debugSuspend = true\n           defaultOfficialPluginsToExclude = ["xld-terraform-plugin-10.1.0", "xld-aws-plugin-10.2.1"]\n           devOpsAsCodes {\n                first {\n                    devOpAsCodeScript = file("${buildDir}/resources/main/xld/devopsAsCode/infrastructure.yaml")\n                    scmAuthor = "John Doe <john.doe@organization.co>"\n                    scmCommit = "6f13f85ca0fa3d7299f195a4a4b1bc95946b98a5"\n                    scmDate = "2021-05-16T12:27:19.000Z"\n                    scmFile = file("${buildDir}/resources/main/xld/devopsAsCode/infrastructure.yaml")\n                    scmMessage = "Create Infrastructure"\n                    scmRemote = "git@github.com:xebialabs/integration-server-gradle-plugin.git"\n                    scmType = "git"\n                }\n           }\n           dockerImage = "xebialabs/xl-deploy" \n           httpPort = 4516\n           generateDatasets = []\n           jvmArgs = ["-Xmx1024m", "-Duser.timezone=UTC"]\n           logLevels = ["com.xebialabs.deployit.plugin.stitch": "debug"]\n           overlays = [\n               plugins          : [\n                   "com.xebialabs.deployit.plugins:xld-ci-explorer:${xldCiExplorerVersion}@xldp", \n               ], \n               conf             : [\n                   "${ciExplorerDataDependency}:configuration@zip",\n                   files("src/test/xld/deployit-license.lic")\n               ],\n               lib              : [project.tasks.getByName("jar").outputs.files],\n               ext              : ["${ciExplorerDataDependency}:extensions@zip"],\n               \'build/artifacts\': ["${ciExplorerDataDependency}:artifacts@zip"],\n               \'xldrepo\': ["${ciExplorerDataDependency}:repository@zip"],\n           ]\n           pingRetrySleepTime = 5\n           pingTotalTries = 120\n           provisionSocketTimeout = 120000\n           provisionScripts = []\n           removeStdoutConfig = true\n           runtimeDirectory = "server-runtime"\n           version = \'10.2.2\'\n           yamlPatches = [\n               \'centralConfiguration/deploy-server.yaml\': [\n                   \'deploy.server.hostname\': \'test.xebialabs.com\',\n                   \'deploy.server.label\': \'XLD\'\n               ]\n           ]     \n       }       \n   }   \n}\n')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"cliDebugPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Remote Debug Port for Deploy CLI")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"cliDebugSuspend"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Suspend the start of the process before the remoting tool is attached.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"contextRoot"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"/"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The context root for Deploy. ",(0,i.kt)("strong",{parentName:"td"},"Limitation:")," ",(0,i.kt)("em",{parentName:"td"},"Doesn't work for docker setup"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Remote Debug Port for Deploy Server")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugSuspend"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Suspend the start of the process before the remoting tool is attached.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"defaultOfficialPluginsToExclude"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The list of plugins which are going to be excluded from the ",(0,i.kt)("strong",{parentName:"td"},"plugins/xld-official"),' before the booting the server. Expected input is the list of strings separated by comma. Exclusion is happening by name convention. If for example you will say "plugin", all plugins going to be removed.')),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"devOpsAsCodes"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"#dev-ops-as-code"},"Read about this section below"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"dockerImage"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"When this property is specified, docker based setup will be performed. The name of the docker image, without version. Version is specified in the separate field or dedicated from gradle properties.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"httpPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Random port"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The HTTP port for Deploy server.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"generateDatasets"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The HTTP port for Deploy server. The url ",(0,i.kt)("inlineCode",{parentName:"td"},'"http://localhost:${server.httpPort}/deployit/generate/${dataset}"')," is going to be hit. This URL point is not available in Deploy by default. How you can develop it, is going to be described soon in a blog.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"jvmArgs"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"JVM arguments which are going to be used on Server startup")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"logLevels"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Custom log levels to be included in logback.xml configuration. Expected format is a map, where the key is the package name and value the log level.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"overlays"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"#overlays"},"Read about this section below"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"pingRetrySleepTime"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"10"),(0,i.kt)("td",{parentName:"tr",align:"center"},"During the startup of the server we check when it's completely booted. This property configures how long to sleep (in seconds) between retries.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"pingTotalTries"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"60"),(0,i.kt)("td",{parentName:"tr",align:"center"},"During the startup of the server we check when it's completely booted. This property configures how many times to retry.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"provisionScripts"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Provision scripts to be executed by task ",(0,i.kt)("inlineCode",{parentName:"td"},"runProvisionScript"),". This subject is up for a change.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"removeStdoutConfig"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Modifies default logback.xml by removing STDOUT output.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"runtimeDirectory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"When this property is specified, runtime directory setup will be performed. Just make sure that you have complete deploy instance present there.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"version"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"It can be specified in several ways. Or as a gradle property ",(0,i.kt)("inlineCode",{parentName:"td"},"xlDeployVersion"),", via parameter or in ",(0,i.kt)("inlineCode",{parentName:"td"},"gradle.properties")," file or explicitly via this field.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"yamlPatches"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"#yaml-patches"},"Read about this section below"))))),(0,i.kt)("h3",{id:"dev-ops-as-code"},"Dev Ops As Code"),(0,i.kt)("p",null,"Applies Dev Ops as code YAML files with extra metadata applied to it (mocked Git metadata associated with the file)."),(0,i.kt)("p",null,"The example of such YAML file is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"title=devop-as-code-sample.yaml",title:"devop-as-code-sample.yaml"},'apiVersion: xl-deploy/v1\nkind: Applications\nspec:\n  - name: Applications/WithGitMetaInfo\n    type: udm.Application\n    children:\n      - name: "1.0.1"\n        type: udm.DeploymentPackage\n      - name: "1.0.2"\n        type: udm.DeploymentPackage\n\n')),(0,i.kt)("p",null,"Read more about devops as code here:\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.xebialabs.com/v.10.2/deploy/how-to/work-with-xl-yaml-format-for-deploy/#yaml-file-fields"},"https://docs.xebialabs.com/v.10.2/deploy/how-to/work-with-xl-yaml-format-for-deploy/#yaml-file-fields")," "),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"devOpAsCodeScript"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The path to the script.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmAuthor"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The author of the commit.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmCommit"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The Git commit hash.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmDate"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The date of the commit.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmFile"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The path of the file")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmMessage"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The Git commit message.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmRemote"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The Git repository URI.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmType"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"SCM type, for example: git, svn, mercury")))),(0,i.kt)("h3",{id:"overlays"},"Overlays"),(0,i.kt)("p",null,"With overlays, you can override any file in any folder in Deploy. ",(0,i.kt)("br",null),"\nOverlay is a map, where key is a path of the folder, and value - the file which going to be added or overwritten.  "),(0,i.kt)("p",null,"Example: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},'overlays = [\n   plugins          : [\n       "com.xebialabs.deployit.plugins:xld-ci-explorer:${xldCiExplorerVersion}@xldp", \n   ], \n   conf             : [\n       "${ciExplorerDataDependency}:configuration@zip",\n       files("src/test/xld/deployit-license.lic")\n   ],\n   lib              : [project.tasks.getByName("jar").outputs.files],\n   ext              : ["${ciExplorerDataDependency}:extensions@zip"],\n   \'build/artifacts\': ["${ciExplorerDataDependency}:artifacts@zip"],\n   \'xldrepo\': ["${ciExplorerDataDependency}:repository@zip"],\n]\n')),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"With Docker based setup you can override only folders which are mounted from Docker image.\nNamely:"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"conf")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"ext")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"hotfix/lib")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"hotfix/plugins")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"plugins")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"repository")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"work"))))),(0,i.kt)("h3",{id:"yaml-patches"},"YAML patches"),(0,i.kt)("p",null,"Central configuration files are YAML files. There are predefined values there which you might want to custom for your needs,\nbefore starting the integration server. Though the feature is not limited to central configuration files only.\nYou still can point to any folder and create/overwrite any file you wish. The configuration is a map (key -> map),\nwhere a key is a folder path and value is another map, in which key is the path to the property and value is a value of the property."),(0,i.kt)("p",null,"For example, if you want to modify in ",(0,i.kt)("inlineCode",{parentName:"p"},"deploy-client.yaml")," file the ",(0,i.kt)("inlineCode",{parentName:"p"},"automatically-map-all-deployables")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", you have\nto do:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Yaml Patch Example",src:a(7947).Z})),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},"yamlPatches = [\n   'centralConfiguration/deploy-client.yaml': [\n       'deploy.client.automatically-map-all-deployables': 'false'\n   ]\n]  \n")),(0,i.kt)("h2",{id:"database-section"},"Database section"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},"integrationServer {\n   databases {\n     database01 {\n        derbyPort = 10000\n        driverVersions = [\n             'mssql'        : '8.4.1.jre8',\n             'mysql'        : '8.0.22',\n             'mysql-8'      : '8.0.22',\n             'oracle-19c-se': '21.1.0.0',\n             'postgres-10'  : '42.2.9',\n             'postgres-12'  : '42.2.23',\n        ]\n        logSql = true\n     }   \n   }\n}\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"derbyPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Random number"),(0,i.kt)("td",{parentName:"tr",align:"center"},"If derby database is used, the port on which it's going to be started. For other databases port is fixed.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"driverVersions"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"['mssql':'8.4.1.jre8','mysql':'8.0.22','mysql-8':'8.0.22','oracle-19c-se':'21.1.0.0','postgres-10':'42.2.9','postgres-12':'42.2.23']"),(0,i.kt)("td",{parentName:"tr",align:"center"})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"logSql"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"If true, enables tracing all SQL queries")))),(0,i.kt)("p",null,"The most important what you have to know regarding the database configuration is, choosing which database to run is happening\nnow on the level of project property ",(0,i.kt)("inlineCode",{parentName:"p"},"database"),". It means that you can specify it in 2 ways:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"adding a parameter via ",(0,i.kt)("inlineCode",{parentName:"li"},"-Pdatabase")),(0,i.kt)("li",{parentName:"ul"},"In the root of your project in ",(0,i.kt)("inlineCode",{parentName:"li"},"gradle.properties")," file")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-properties",metastring:"title=gradle.properties",title:"gradle.properties"},"database=derby-network\n")),(0,i.kt)("p",null,"If nothing specified, ",(0,i.kt)("strong",{parentName:"p"},"derby in memory")," is going to be used."),(0,i.kt)("h2",{id:"workers-section"},"Workers section"),(0,i.kt)("p",null,"Whenever you have to distribute the load of your system and parallelize the deployment execution you can configure workers.\nIn real case scenario you can run workers as on the same as well as on different VMs.\nThere are 3 types of workers: "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"internal worker which is embedded to a server, when no workers configured."),(0,i.kt)("li",{parentName:"ul"},"local workers, when extra JVM processed is spanned from the same folder"),(0,i.kt)("li",{parentName:"ul"},"external workers, when you run the worker from another folder on the same or different VM")),(0,i.kt)("p",null,"Read more about workers here:\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.xebialabs.com/v.10.2/deploy/concept/high-availability-with-master-worker-setup/#preparing-multiple-masters"},"https://docs.xebialabs.com/v.10.2/deploy/concept/high-availability-with-master-worker-setup/#preparing-multiple-masters")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Integration Server")," currently support running only on the same VM."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},'integrationServer {\n    workers {\n        worker01 { \n        }\n        worker02 { \n            debugPort = 5006\n            debugSuspend = true\n            jvmArgs = ["-Xmx1024m", "-Duser.timezone=UTC"]\n        }\n        worker03 { \n            debugPort = 5007\n            debugSuspend = false\n            directory = "/opt/xl-deploy-worker"\n            jvmArgs = ["-Xmx1024m", "-Duser.timezone=UTC"]\n            port = 8182\n        }\n    }\n}\n')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Remote Debug Port for a worker.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugSuspend"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Suspend the start of the process before the remoting tool is attached.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"directory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"If specified, it will run external worker, from the different folder location than server.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"jvmArgs"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"JVM arguments which are going to be used on a worker startup.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"port"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Port on which worker will start.")))),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Docker based setup currently don't support workers. "))),(0,i.kt)("h2",{id:"satellites-section"},"Satellites section"),(0,i.kt)("p",null,"In comparison with workers, the goal for a satellite is to perform deployments on the different network with Deploy. When\nthe connection between networks is not fast and less reliable. ",(0,i.kt)("br",null)),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Integration Server")," at this moment doesn't simulate slow network, but rather allows you to test that the functionality\nproperly works on a satellite. A satellite itself is installed on the same VM. ",(0,i.kt)("br",null)),(0,i.kt)("p",null,"You can read more about a satellite here:\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.xebialabs.com/v.10.2/deploy/concept/getting-started-with-the-satellite-module/"},"https://docs.xebialabs.com/v.10.2/deploy/concept/getting-started-with-the-satellite-module/")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},'integrationServer {\n    satellites {\n       satellite01 {  // name of the section\n            debugPort = 5008\n            debugSuspend = true\n            overlays = [\n                lib              : [files("src/test/resources/my-library.jar")],\n                ext              : ["src/test/resources/synthetic.xml"]\n            ]       \n            version = "10.2.2"\n       }   \n    }\n}\n')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Remote Debug Port for a satellite.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugSuspend"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Suspend the start of the process before the remoting tool is attached.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"overlays"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Identical to Server overlays, only in a satellite. ",(0,i.kt)("a",{parentName:"td",href:"#overlays"},"Read about this section below"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"version"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"It can be specified in several ways. Or as a gradle property ",(0,i.kt)("inlineCode",{parentName:"td"},"xlSatelliteVersion"),", via parameter or in ",(0,i.kt)("inlineCode",{parentName:"td"},"gradle.properties")," file or explicitly via this field.")))),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Docker based setup currently don't support satellites. "))),(0,i.kt)("h2",{id:"mq-driver-versions"},"MQ Driver Versions"),(0,i.kt)("p",null,"Message Queue Drivers are by default chosen by the plugin, you can change that, and this is exactly what this section about."),(0,i.kt)("p",null,"That's how your can override it: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},"integrationServer {\n    mqDriverVersions {\n        [\n            'activemq': '5.16.2',\n            'rabbitmq': '2.2.0'\n        ]\n    }\n}\n")),(0,i.kt)("p",null,"In this sample you can see the default values used in the plugin."),(0,i.kt)("h2",{id:"xld-integration-server-data-version"},"XLD Integration Server Data Version"),(0,i.kt)("p",null,"Currently, this is used only internally in Digital.ai to point to a package with imported data. ",(0,i.kt)("br",null),"\nBefore server starts, database is going to be populated by the imported data, to save the time during test run."))}m.isMDXComponent=!0},7947:function(e,t,a){t.Z=a.p+"assets/images/yaml-patch-example-5db185920b7e8925c5751eeb18c131f7.png"}}]);