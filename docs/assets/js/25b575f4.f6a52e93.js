"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3995],{3905:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return k}});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),s=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=s(a),k=n,g=m["".concat(p,".").concat(k)]||m[k]||c[k]||i;return a?r.createElement(g,o(o({ref:t},d),{},{components:a})):r.createElement(g,o({ref:t},d))}));function k(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var s=2;s<i;s++)o[s]=a[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2593:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return d},default:function(){return m}});var r=a(7462),n=a(3366),i=(a(7294),a(3905)),o=["components"],l={sidebar_position:5},p="Configuration",s={unversionedId:"deploy/configuration",id:"deploy/configuration",isDocsHomePage:!1,title:"Configuration",description:"The first section level",source:"@site/docs/deploy/configuration.md",sourceDirName:"deploy",slug:"/deploy/configuration",permalink:"/integration-server-gradle-plugin/docs/deploy/configuration",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Examples",permalink:"/integration-server-gradle-plugin/docs/deploy/examples"},next:{title:"Tasks",permalink:"/integration-server-gradle-plugin/docs/deploy/tasks"}},d=[{value:"The first section level",id:"the-first-section-level",children:[]},{value:"CLI section",id:"cli-section",children:[]},{value:"Cluster section",id:"cluster-section",children:[]},{value:"Cluster profiles for operator",id:"cluster-profiles-for-operator",children:[{value:"AWS Openshift profile",id:"aws-openshift-profile",children:[]},{value:"Azure AKS profile",id:"azure-aks-profile",children:[]},{value:"GCP GKE profile",id:"gcp-gke-profile",children:[]},{value:"Onprem Minikube profile",id:"onprem-minikube-profile",children:[]},{value:"AWS EKS profile",id:"aws-eks-profile",children:[]}]},{value:"Servers section",id:"servers-section",children:[{value:"Dev Ops As Code",id:"dev-ops-as-code",children:[]},{value:"Overlays",id:"overlays",children:[]},{value:"YAML patches",id:"yaml-patches",children:[]}]},{value:"Database section",id:"database-section",children:[]},{value:"Maintenance section",id:"maintenance-section",children:[]},{value:"Workers section",id:"workers-section",children:[]},{value:"Central Configuration Server section",id:"central-configuration-server-section",children:[]},{value:"Satellites section",id:"satellites-section",children:[]},{value:"MQ Driver Versions",id:"mq-driver-versions",children:[{value:"Operator server section",id:"operator-server-section",children:[]}]},{value:"XLD Integration Server Data Version",id:"xld-integration-server-data-version",children:[]},{value:"Cache Server",id:"cache-server",children:[]},{value:"Tests section",id:"tests-section",children:[]}],c={toc:d};function m(e){var t=e.components,l=(0,n.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},c,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"configuration"},"Configuration"),(0,i.kt)("h2",{id:"the-first-section-level"},"The first section level"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},"deployIntegrationServer {\n    cli {}\n    cluster {}\n    clusterProfiles {}\n    database {}\n    maintenance {}\n    mqDriverVersions {}\n    operatorServer {}\n    satellites {}\n    servers {}\n    tests {}\n    xldIsDataVersion {}\n    workers {}\n}\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"cli"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The configuration section for Deploy CLI client to run Jython scripts against Deploy server instance.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"cluster"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The configuration section for cluster based setup. By default it's disabled.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"clusterProfiles"),(0,i.kt)("td",{parentName:"tr",align:"center"},"In this section you can define multiple profiles for different providers and in cluster section define which profile is active now.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"database"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Database configuration, you can find this section helpful for overriding database driving versions or having more database level logs.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"mqDriverVersions"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Points to the version of MQ to use, in case you wish to adapt it to your own version.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorServer"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Operator is installed/upgraded with help of Deploy server. It can be configured of different image/version that one is running on cluster.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"satellites"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can configure as many satellites as you need here.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"servers"),(0,i.kt)("td",{parentName:"tr",align:"center"},"For non-cluster setup, you can specify here only 1 active server, the rest will be ignored. Unless it is a configuration for update from a previous installation.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"tests"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can define Jython based test setups")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"xldIsDataVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("strong",{parentName:"td"},"Only for internal use in Digital.ai")," Points to the data which is going to be imported after server is booted. To run waste the time to generate a huge amount of test data.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"workers"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can configure as many workers as you need here.")))),(0,i.kt)("h2",{id:"cli-section"},"CLI section"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},'deployIntegrationServer {\n    cli {\n        cleanDefaultExtContent = true\n        copyBuildArtifacts = [\n           lib: /(.+)[.](jar)/\n        ]\n        debugPort = 4005\n        debugSuspend = true\n        enable = false\n        filesToExecute = [file("src/main/resources/provision.py")]\n        overlays = [\n            ext: [\n                    files("ext") \n            ],\n            lib: [\n                    "com.xebialabs.xl-platform.test-utils:py-modules:${testUtilsVersion}@jar"\n            ]\n        ]\n        socketTimeout = 120000\n        version = "10.2.2"\n    }\n}\n')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"cleanDefaultExtContent"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"By default in CLI there are 3 files included in the ext with some helper functions. You can remove it if it clashes with your scripts.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"copyBuildArtifacts"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Here you can define what would you like to include to integration server from the build process itself. For example you run: ",(0,i.kt)("inlineCode",{parentName:"td"},"./gradlew build integrationServer")," and you create ",(0,i.kt)("inlineCode",{parentName:"td"},"*.jar")," of your plugin which you would like to include to integration server. You have to specify it here. As for overlay it won't work. With overlay to make it work you have to run 2 commands: ",(0,i.kt)("inlineCode",{parentName:"td"},"./gradlew build")," and then ",(0,i.kt)("inlineCode",{parentName:"td"},"./gradlew startIntegrationServer"),". Key is a relative folder name from CLI base, and a value is a pattern to all files located in ",(0,i.kt)("inlineCode",{parentName:"td"},"build")," folder except ",(0,i.kt)("inlineCode",{parentName:"td"},"integration-server")," sub-folder. This one is excluded.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Remote Debug Port for Deploy CLI")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugSuspend"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Suspend the start of the process before the remoting tool is attached.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"enable"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"true"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can disable it, if you don't want to work with it, and it won't be downloaded.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"filesToExecute"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The list of files which will be executed after Deploy Server (workers and satellite if configured) started. You can use it to provision your server with data before running the tests.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"overlays"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"#overlays"},"Read about this section below"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"socketTimeout"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"60000"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Time is set in ms. Socket timeout means how long the socket will be opened to execute the provided script. If your script takes a time to be executed, consider to increase it.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"version"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"It can be specified in several ways. Or as a gradle property ",(0,i.kt)("inlineCode",{parentName:"td"},"deployCliVersion"),", via parameter or in ",(0,i.kt)("inlineCode",{parentName:"td"},"gradle.properties")," file or explicitly via this field. As a last resource it also checks on ",(0,i.kt)("inlineCode",{parentName:"td"},"xlDeployVersion"),", as usually the version should be the same, but you have a possibility to define different versions.")))),(0,i.kt)("h2",{id:"cluster-section"},"Cluster section"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},"deployIntegrationServer {\n    cluster {\n        debugSuspend = true\n        enable = true\n        enableDebug = true\n        profile = 'operator'\n        publicPort = 1000\n    }\n}\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugSuspend"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Suspend the start of the process before the remoting tool is attached. Take in mind that you have to attach to all processes to be able to completely run the cluster.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"enable"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"If true, cluster setup will be enabled.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"enableDebug"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"If true, debug will be enabled on all masters and workers. The exposed ports to connect will be randomly defined. You can check with ",(0,i.kt)("inlineCode",{parentName:"td"},"docker ps")," which port was exposed for debugging.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"profile"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"dockerCompose"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The way to run the setup. There are 2 possible ways now: dockerCompose or operator. If you use operator, you have to configure ",(0,i.kt)("inlineCode",{parentName:"td"},"clusterProfiles")," section too.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"publicPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"8080"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The port to connect to the cluster.")))),(0,i.kt)("p",null,"Example for dockerCompose configuration:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},'deployIntegrationServer {\n    cluster {\n        enable = true\n    }\n    servers {\n        server01 {\n            dockerImage = "xebialabs/xl-deploy"\n            version = "10.4.0" // not released yet\n        }\n        server02 {\n        }\n    }\n    workers {\n        worker01 {\n            dockerImage = "xebialabs/deploy-task-engine"\n        }\n        worker02 {\n        }\n    }\n}\n')),(0,i.kt)("p",null,"You can define less or more servers and workers. The docker image is being read from the first server and\nfirst worker sections. Version is enough to specify only in the first server section, as server and worker versions\nshould always match."),(0,i.kt)("p",null,"Example where to check for debugging ports to attach:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Example",src:a(2114).Z})),(0,i.kt)("p",null,"Example for operator configuration:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"    ...\n    cluster {\n        enable = true\n        profile = 'operator'\n        publicPort = 10001\n    }\n    clusterProfiles {\n        operator {\n            activeProviderName = \"aws-openshift\"\n            awsOpenshift {\n                apiServerURL = 'https://yourhost.openshiftapps.com:6443'\n                host = 'router-default.yourhost.openshiftapps.com'\n                name = 'aws-openshift-test-cluster'\n                oauthHostName = \"oauth-openshift.yourhost.openshiftapps.com\"\n                operatorImage = 'acierto/deploy-operator:1.0.6-openshift'\n                operatorPackageVersion = \"1.0.7\"\n            }\n        }\n    }\n    ...\n")),(0,i.kt)("h2",{id:"cluster-profiles-for-operator"},"Cluster profiles for operator"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"clusterProfiles {\n    operator {\n        activeProviderName = \"aws-openshift\"\n        awsOpenshift {\n            apiServerURL = 'https://api.acierto.lnfl.p1.openshiftapps.com:6443'\n            host = 'router-default.apps.acierto.lnfl.p1.openshiftapps.com'\n            name = 'aws-openshift-test-cluster'\n            oauthHostName = \"oauth-openshift.apps.acierto.lnfl.p1.openshiftapps.com\"\n            operatorImage = 'acierto/deploy-operator:1.0.6-openshift'\n            operatorPackageVersion = \"1.0.1\"\n        }\n        azureAks {\n            clusterNodeCount = 3\n            clusterNodeVmSize = 'Standard_DS2_v2'\n            kubernetesVersion = '1.20'\n            location = 'northcentralus'\n            name = 'azure-aks-test-cluster'\n            skipExisting = false\n            azUsername = 'azure_username'\n            azPassword = 'secret'\n        }\n        gcpGke {\n            accountCredFile = 'path_to_the_cred_json_file'\n            accountName = 'gcp-gke-usert@apollo-playground.iam.gserviceaccount.com'\n            clusterNodeCount = 3\n            clusterNodeVmSize = 'e2-standard-2'\n            kubernetesVersion = '1.20.11-gke.1801'\n            name = 'gcp-gke-test-cluster'\n            projectName = 'apollo-playground'\n            regionZone = 'us-central1-a'\n            skipExisting = false\n        }        \n        onPremise {\n            name = 'onprem-test-cluster'\n            clusterNodeCpus = 4\n            clusterNodeMemory = 15000\n            kubernetesVersion = '1.20.0'\n            skipExisting = false\n        }\n        awsEks {\n            region = \"us-east-1\"\n            stack = \"deploy-operator-test\"\n            clusterName = \"deploy-operator-cluster-test\"\n            nodeGroupName = \"deploy-operator-cluster-nodegroup\"\n            clusterNodeCount = 2\n            sshKeyName = \"deploy-operator-ssh-key\"\n            fileSystemName = \"deploy-operator-efs-test\"\n            kubernetesVersion = \"1.20\"\n            skipExisting = true\n            stackTimeoutSeconds = 1500000\n            stackSleepTimeBeforeRetrySeconds = 300000\n            route53InsycAwaitTimeoutSeconds = 300000\n            accessKey = \"AWS access key\"\n            secretKey = \"AWS Secret key\"\n        }\n    }\n}\n")),(0,i.kt)("h3",{id:"aws-openshift-profile"},"AWS Openshift profile"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},'activeProviderName = "aws-openshift"')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"apiServerURL"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The URL to your OpenShift cluster server API")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"host"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The public host on which cluster will be available to interact with. Basically it is your OpenShift router URL.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"keystorePassphrase"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"test123"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Keystore password to encrypt sensitive information in CIs")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"name"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The name of your cluster.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorImage"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"xebialabs/deploy-operator:1.2.0-openshift"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The image of operator which is going to be used to install the Deploy cluster")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorPackageVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"1.0.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"We deploy operator with help of Deploy, this is a version which will be used as a application package version.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"oauthHostName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"OAuth host name of your OpenShift cluster. It is used to get a new token based on your credentials. This token is required to interact with OpenShift cluster.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"repositoryKeystore"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Provided"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Keystore to encrypt sensitive information in CIs")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"storageClass"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"aws-efs"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can use another storage class, but you have to be sure that it is NFS based, otherwise it won't work.")))),(0,i.kt)("h3",{id:"azure-aks-profile"},"Azure AKS profile"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},'activeProviderName = "azure-aks"')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"azUsername"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Azure username to be used with az cli tool.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"azPassword"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Azure password to be used with az cli tool.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"clusterNodeCount"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"2"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Number of the nodes that will be created during cluster creation on Azure.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"clusterNodeVmSize"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Standard_DS2_v2 (Azure default value)"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Node VM size named on Azure.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"kubernetesVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Default Azure version is 1.20"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The kubernetes version that will be custom string for each provider.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"location"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The Azure location that represents geo location where cluster will be running.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"name"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The name of your cluster.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorImage"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"xebialabs/deploy-operator:1.2.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The image of operator which is going to be used to install the Deploy cluster")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorPackageVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"1.2.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"We deploy operator with help of Deploy, this is a version which will be used as a application package version.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"skipExisting"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"true"),(0,i.kt)("td",{parentName:"tr",align:"center"},"For some cluster resources there are checks if resources exist, if set to true skip creation.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"storageClass"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Storage class prefix. On Azure with prefix are created new classes for file and disk storage.")))),(0,i.kt)("h3",{id:"gcp-gke-profile"},"GCP GKE profile"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},'activeProviderName = "gcp-gke"')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"accountCredFile"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"A file path to read the access token credentials file.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"accountName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"GCP user account that will be used with ",(0,i.kt)("inlineCode",{parentName:"td"},"gcloud")," plugin.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"clusterNodeCount"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"3"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Number of the nodes that will be created during cluster creation on GCP.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"clusterNodeVmSize"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Medium_DS2_v2 (GCP default value)"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Node VM size named on GCP.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"kubernetesVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"1.20.11-gke.1801"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The kubernetes version that will be custom string for each provider.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"name"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The name of your cluster.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorImage"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"xebialabs/deploy-operator:1.2.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The image of operator which is going to be used to install the Deploy cluster")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorPackageVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"1.2.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"We deploy operator with help of Deploy, this is a version which will be used as a application package version.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"projectName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The GCP project in which GKE cluster will be created.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"regionZone"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The cluster GEO zone where cluster instances will be located.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"skipExisting"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"true"),(0,i.kt)("td",{parentName:"tr",align:"center"},"For some cluster resources there are checks if resources exist, if set to true skip creation.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"storageClass"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"standard"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can use another storage class, but you have to be sure that it is NFS based, otherwise it won't work.")))),(0,i.kt)("h3",{id:"onprem-minikube-profile"},"Onprem Minikube profile"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},'activeProviderName = "onprem"')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"clusterNodeCpus"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Number of CPUs that will be used by cluster.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"clusterNodeMemory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Memory size in MB that will be used by cluster.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"kubernetesVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"1.20.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The kubernetes version that will be custom string for each provider.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"name"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The name of your cluster.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorImage"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"xebialabs/deploy-operator:1.2.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The image of operator which is going to be used to install the Deploy cluster")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorPackageVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"1.2.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"We deploy operator with help of Deploy, this is a version which will be used as a application package version.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"skipExisting"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"true"),(0,i.kt)("td",{parentName:"tr",align:"center"},"For some cluster resources there are checks if resources exist, if set to true skip creation.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"storageClass"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"standard"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can use another storage class, but you have to be sure that it is NFS based, otherwise it won't work.")))),(0,i.kt)("h3",{id:"aws-eks-profile"},"AWS EKS profile"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},'activeProviderName = "aws-eks"')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"accessKey"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"AWS AccessKey to access aws cli tool.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"secretKey"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"-"),(0,i.kt)("td",{parentName:"tr",align:"center"},"AWS SecretKey to access aws cli tool.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"region"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"'us-east-1'"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Region where the cluster to be created.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"stack"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"'deploy-operator-test'"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Name of the AWS stack.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"clusterName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"'deploy-operator-cluster-test'"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Name of the AWS EKS Cluster.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"nodeGroupName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"'deploy-operator-cluster-nodegroup'"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Name of the nodeGroup. At present only two node groups are support.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"clusterNodeCount"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"2"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Number of the worker nodes to be created within node group, max node count of each group is 8.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"kubernetesVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Default version is 1.20"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The kubernetes version that will be custom string for each provider.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"sshKeyName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"'deploy-operator-ssh-key'"),(0,i.kt)("td",{parentName:"tr",align:"center"},"ssh key for accessing Amazon EC2 instance.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"fileSystemName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"'deploy-operator-efs-test'"),(0,i.kt)("td",{parentName:"tr",align:"center"},"AWS EFS file system name.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorImage"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"xebialabs/deploy-operator:1.2.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The image of operator which is going to be used to install the Deploy cluster")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"operatorPackageVersion"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"1.2.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"We deploy operator with help of Deploy, this is a version which will be used as a application package version.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"skipExisting"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"true"),(0,i.kt)("td",{parentName:"tr",align:"center"},"For some cluster resources there are checks if resources exist, if set to true skip creation.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"stackTimeoutSeconds"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"1500000"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Maximum wait time for 'Stack Creation' or 'Stack Deletion' in seconds.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"stackSleepTimeBeforeRetrySeconds"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"300000"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Polling period in seconds for 'Stack Creation' or 'Stack Deletion'.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"route53InsycAwaitTimeoutSeconds"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"300000"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Polling period in seconds for route53 provisioning.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"storageClass"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\"aws-efs && gp2'"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Use gp2 storageclass for postgres and rabbitmq and  use 'aws-efs' storageclass for xl-deploy pods")))),(0,i.kt)("h2",{id:"servers-section"},"Servers section"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},'deployIntegrationServer {\n   servers {\n       controlPlane { // The name of the section, you can name it as you wish\n           pekkoSecured = true\n           contextRoot = "/custom"\n           copyBuildArtifacts = [\n                "plugins/xld-official": /(.+)[.](xldp)/\n           ]\n           copyFolders = [\n                file("config/ext"): "ext"\n           ]\n           debugPort = 4005\n           debugSuspend = true\n           defaultOfficialPluginsToExclude = ["xld-terraform-plugin-10.1.0", "xld-aws-plugin-10.2.1"]\n           devOpsAsCodes {\n                first {\n                    devOpAsCodeScript = file("${buildDir}/resources/main/xld/devopsAsCode/infrastructure.yaml")\n                    scmAuthor = "John Doe <john.doe@organization.co>"\n                    scmCommit = "6f13f85ca0fa3d7299f195a4a4b1bc95946b98a5"\n                    scmDate = "2021-05-16T12:27:19.000Z"\n                    scmFile = file("${buildDir}/resources/main/xld/devopsAsCode/infrastructure.yaml")\n                    scmMessage = "Create Infrastructure"\n                    scmRemote = "git@github.com:xebialabs/integration-server-gradle-plugin.git"\n                    scmType = "git"\n                }\n           }\n           dockerImage = "xebialabs/xl-deploy" \n           httpPort = 4516\n           generateDatasets = []\n           jvmArgs = ["-Xmx1024m", "-Duser.timezone=UTC"]\n           logLevels = ["com.xebialabs.deployit.plugin.stitch": "debug"]\n           overlays = [\n               \'build/artifacts\': ["${ciExplorerDataDependency}:artifacts@zip"],\n               conf             : [\n                   "${ciExplorerDataDependency}:configuration@zip",\n                   files("src/test/xld/deployit-license.lic")\n               ],\n               ext              : ["${ciExplorerDataDependency}:extensions@zip"],\n               lib              : [project.tasks.getByName("jar").outputs.files],\n               \'plugins/xld-official\': [\n                   "com.xebialabs.deployit.plugins:xld-ci-explorer:${xldCiExplorerVersion}@xldp", \n               ], \n               \'xldrepo\': ["${ciExplorerDataDependency}:repository@zip"],\n           ]\n           pingRetrySleepTime = 5\n           pingTotalTries = 120\n           removeStdoutConfig = true\n           runtimeDirectory = "server-runtime"\n           stdoutFileName = \'deploy-server-runtime.log\'\n           tls = true\n           version = \'10.2.2\'\n           yamlPatches = [\n               \'centralConfiguration/deploy-server.yaml\': [\n                   \'deploy.server.aggregation-timeout\': 5 seconds,\n                   \'deploy.server.label\': \'XLD\'\n               ]\n           ]     \n       }       \n   }   \n}\n')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"pekkoSecured"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Runs pekko communication with worker with enabled TLS TCP. All keys, keystores and truststores are generated per master, worker and satellite.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"copyBuildArtifacts"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Here you can define what would you like to include to integration server from the build process itself. For example you run: ",(0,i.kt)("inlineCode",{parentName:"td"},"./gradlew build integrationServer")," and you create ",(0,i.kt)("inlineCode",{parentName:"td"},"*.xldp")," of your plugin which you would like to include to integration server. You have to specify it here. As for overlay it won't work. With overlay to make it work you have to run 2 commands: ",(0,i.kt)("inlineCode",{parentName:"td"},"./gradlew build")," and then ",(0,i.kt)("inlineCode",{parentName:"td"},"./gradlew startIntegrationServer"),". Key is a relative folder name from Deploy base, and a value is a pattern to all files located in ",(0,i.kt)("inlineCode",{parentName:"td"},"build")," folder except ",(0,i.kt)("inlineCode",{parentName:"td"},"integration-server")," sub-folder. This one is excluded.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"copyFolders"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"It is an additional option to copy folders to preserve the folder structure. Overlay will flatten it, if you'll try to do the same.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"contextRoot"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"/"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The context root for Deploy. ",(0,i.kt)("strong",{parentName:"td"},"Limitation:")," ",(0,i.kt)("em",{parentName:"td"},"Doesn't work for docker setup"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Remote Debug Port for Deploy Server")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugSuspend"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Suspend the start of the process before the remoting tool is attached.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"defaultOfficialPluginsToExclude"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The list of plugins which are going to be excluded from the ",(0,i.kt)("strong",{parentName:"td"},"plugins/xld-official"),' before the booting the server. Expected input is the list of strings separated by comma. Exclusion is happening by name convention. If for example you will say "plugin", all plugins going to be removed.')),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"devOpsAsCodes"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"#dev-ops-as-code"},"Read about this section below"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"dockerImage"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"When this property is specified, docker based setup will be performed. The name of the docker image, without version. Version is specified in the separate field or dedicated from gradle properties.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"generateDatasets"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The url ",(0,i.kt)("inlineCode",{parentName:"td"},'"http://localhost:${server.httpPort}/deployit/generate/${dataset}"')," is going to be hit. This URL point is not available in Deploy by default. How you can develop it, is going to be described soon in a blog.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"httpPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Random port"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The HTTP port for Deploy server.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"jvmArgs"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"JVM arguments which are going to be used on Server startup")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"logLevels"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Custom log levels to be included in logback.xml configuration. Expected format is a map, where the key is the package name and value the log level.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"overlays"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"#overlays"},"Read about this section below"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"pingRetrySleepTime"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"10"),(0,i.kt)("td",{parentName:"tr",align:"center"},"During the startup of the server we check when it's completely booted. This property configures how long to sleep (in seconds) between retries.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"pingTotalTries"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"60"),(0,i.kt)("td",{parentName:"tr",align:"center"},"During the startup of the server we check when it's completely booted. This property configures how many times to retry.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"runtimeDirectory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"When this property is specified, runtime directory setup will be performed. Just make sure that you have complete deploy instance present there.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"stdoutFileName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The filename that stores standard output and error for server runtime. If not present output is discarded. Note: it should be used only for debugging purposes: if used with class loaded runtime (runtimeDirectory) it will block execution after startup because, for that case, limitations in process spawning")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"version"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"It can be specified in several ways. Or as a gradle property ",(0,i.kt)("inlineCode",{parentName:"td"},"xlDeployVersion"),", via parameter or in ",(0,i.kt)("inlineCode",{parentName:"td"},"gradle.properties")," file or explicitly via this field.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"tls"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"If enabled use HTTPS for API communication with master.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"yamlPatches"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"#yaml-patches"},"Read about this section below"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"previousInstallation"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Is the server the previous installed version to be used a as source for upgrade.")))),(0,i.kt)("h3",{id:"dev-ops-as-code"},"Dev Ops As Code"),(0,i.kt)("p",null,"Applies Dev Ops as code YAML files with extra metadata applied to it (mocked Git metadata associated with the file)."),(0,i.kt)("p",null,"The example of such YAML file is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"title=devop-as-code-sample.yaml",title:"devop-as-code-sample.yaml"},'apiVersion: xl-deploy/v1\nkind: Applications\nspec:\n  - name: Applications/WithGitMetaInfo\n    type: udm.Application\n    children:\n      - name: "1.0.1"\n        type: udm.DeploymentPackage\n      - name: "1.0.2"\n        type: udm.DeploymentPackage\n\n')),(0,i.kt)("p",null,"Read more about devops as code here:\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.xebialabs.com/v.10.2/deploy/how-to/work-with-xl-yaml-format-for-deploy/#yaml-file-fields"},"https://docs.xebialabs.com/v.10.2/deploy/how-to/work-with-xl-yaml-format-for-deploy/#yaml-file-fields")," "),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"devOpAsCodeScript"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The path to the script.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmAuthor"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The author of the commit.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmCommit"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The Git commit hash.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmDate"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The date of the commit.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmFile"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The path of the file")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmMessage"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The Git commit message.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmRemote"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The Git repository URI.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scmType"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"SCM type, for example: git, svn, mercury")))),(0,i.kt)("h3",{id:"overlays"},"Overlays"),(0,i.kt)("p",null,"With overlays, you can override any file in any folder in Deploy. ",(0,i.kt)("br",null),"\nOverlay is a map, where key is a path of the folder, and value - the file which going to be added or overwritten.  "),(0,i.kt)("p",null,"Example: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},'overlays = [\n   \'build/artifacts\': ["${ciExplorerDataDependency}:artifacts@zip"],\n   conf             : [\n       "${ciExplorerDataDependency}:configuration@zip",\n       files("src/test/xld/deployit-license.lic")\n   ],\n   ext              : ["${ciExplorerDataDependency}:extensions@zip"],\n   lib              : [project.tasks.getByName("jar").outputs.files],\n   \'plugins/xld-official\': [\n       "com.xebialabs.deployit.plugins:xld-ci-explorer:${xldCiExplorerVersion}@xldp", \n   ], \n   \'xldrepo\'        : ["${ciExplorerDataDependency}:repository@zip"],\n]\n')),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"With Docker based setup you can override only folders which are mounted from Docker image.\nNamely:"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"conf")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"ext")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"hotfix/lib")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"hotfix/plugins")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"plugins")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"repository")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"work"))))),(0,i.kt)("h3",{id:"yaml-patches"},"YAML patches"),(0,i.kt)("p",null,"Central configuration files are YAML files. There are predefined values there which you might want to custom for your needs,\nbefore starting the integration server. Though the feature is not limited to central configuration files only.\nYou still can point to any folder and create/overwrite any file you wish. The configuration is a map (key -> map),\nwhere a key is a folder path and value is another map, in which key is the path to the property and value is a value of the property."),(0,i.kt)("p",null,"For example, if you want to modify in ",(0,i.kt)("inlineCode",{parentName:"p"},"deploy-client.yaml")," file the ",(0,i.kt)("inlineCode",{parentName:"p"},"automatically-map-all-deployables")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", you have\nto do:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Yaml Patch Example",src:a(1783).Z})),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},"yamlPatches = [\n   'centralConfiguration/deploy-client.yaml': [\n       'deploy.client.automatically-map-all-deployables': 'false'\n   ]\n]  \n")),(0,i.kt)("h2",{id:"database-section"},"Database section"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},"deployIntegrationServer {\n   database { \n      databasePort = 10000\n      driverVersions = [\n             'mssql'        : '8.4.1.jre8',\n             'mysql'        : '8.0.22',\n             'mysql-8'      : '8.0.22',\n             'oracle-19c-se': '21.1.0.0',\n             'postgres-10'  : '42.2.9',\n             'postgres-12'  : '42.2.23',\n      ]\n      logSql = true\n   }\n}\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"databasePort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Random number"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The port on which database is going to be started.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"driverVersions"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"['mssql':'8.4.1.jre8','mysql':'8.0.22','mysql-8':'8.0.22','oracle-19c-se':'21.1.0.0','postgres-10':'42.2.9','postgres-12':'42.2.23']"),(0,i.kt)("td",{parentName:"tr",align:"center"})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"logSql"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"If true, enables tracing all SQL queries")))),(0,i.kt)("p",null,"The most important what you have to know regarding the database configuration is, choosing which database to run is happening\nnow on the level of project property ",(0,i.kt)("inlineCode",{parentName:"p"},"database"),". It means that you can specify it in 2 ways:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"adding a parameter via ",(0,i.kt)("inlineCode",{parentName:"li"},"-Pdatabase")),(0,i.kt)("li",{parentName:"ul"},"In the root of your project in ",(0,i.kt)("inlineCode",{parentName:"li"},"gradle.properties")," file")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-properties",metastring:"title=gradle.properties",title:"gradle.properties"},"database=derby-network\n")),(0,i.kt)("p",null,"If nothing specified, ",(0,i.kt)("strong",{parentName:"p"},"derby in memory")," is going to be used."),(0,i.kt)("h2",{id:"maintenance-section"},"Maintenance section"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},'deployIntegrationServer {\n    maintenance {\n        cleanupBeforeStartup = [\n                file("ext/ci.py"),\n                file("ext/default-imports.py"),\n                file("ext/readme.cli")\n        ]\n    }\n}\n')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"cleanupBeforeStartup"),(0,i.kt)("td",{parentName:"tr",align:"center"},"List"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The list of files/folders to clean up before next server run.")))),(0,i.kt)("h2",{id:"workers-section"},"Workers section"),(0,i.kt)("p",null,"Whenever you have to distribute the load of your system and parallelize the deployment execution you can configure workers.\nIn real case scenario you can run workers as on the same as well as on different VMs.\nThere are 3 types of workers: "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"internal worker which is embedded to a server, when no workers configured."),(0,i.kt)("li",{parentName:"ul"},"local workers, when extra JVM processed is spanned from the same folder"),(0,i.kt)("li",{parentName:"ul"},"external workers, when you run the worker from another folder on the same or different VM")),(0,i.kt)("p",null,"Read more about workers here:\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.xebialabs.com/v.10.2/deploy/concept/high-availability-with-master-worker-setup/#preparing-multiple-masters"},"https://docs.xebialabs.com/v.10.2/deploy/concept/high-availability-with-master-worker-setup/#preparing-multiple-masters")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Integration Server")," currently support running only on the same VM."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},'deployIntegrationServer {\n    workers {\n        worker01 {  // The name of the section, you can name it as you wish\n            version = "10.2.2" // Optional, if not specified will use same version as Server\n        }\n        worker02 {  // The name of the section, you can name it as you wish\n            debugPort = 5006\n            debugSuspend = true\n            jvmArgs = ["-Xmx1024m", "-Duser.timezone=UTC"]\n        }\n        worker03 {  // The name of the section, you can name it as you wish\n            debugPort = 5007\n            debugSuspend = false\n            runtimeDirectory = "/opt/xl-deploy-worker"\n            slimDistribution = true \n            stdoutFileName = \'worker.log\'\n            jvmArgs = ["-Xmx1024m", "-Duser.timezone=UTC"]\n            port = 8182\n        }\n    }\n}\n')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Remote Debug Port for a worker.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugSuspend"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Suspend the start of the process before the remoting tool is attached.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"jvmArgs"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"JVM arguments which are going to be used on a worker startup.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"logLevels"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Custom log levels to be included in logback.xml configuration. Expected format is a map, where the key is the package name and value the log level.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"overlays"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"#overlays"},"Read about this section below"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"port"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Port on which worker will start.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"runtimeDirectory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"If specified, it will run external worker, from the different folder location than server. It will not try to download released version.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"slimDistribution"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"When false runs worker within cloned xl-deploy directory. If true runs worker from downloaded deploy-task-engine. Default is false.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"stdoutFileName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The filename that stores standard output and error for worker runtime. If not present output is discarded. Note: it should be used only for debugging purposes: if used with class loaded runtime (runtimeDirectory) it will block execution after startup because, for that case, limitations in process spawning")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"version"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"It can be specified in several ways. Or as a gradle property ",(0,i.kt)("inlineCode",{parentName:"td"},"deployTaskEngineVersion"),", via parameter or in ",(0,i.kt)("inlineCode",{parentName:"td"},"gradle.properties")," file or explicitly via this field. If not specified, it will take the same version as Server.")))),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Docker based setup currently don't support workers. "))),(0,i.kt)("h2",{id:"central-configuration-server-section"},"Central Configuration Server section"),(0,i.kt)("p",null,"In order to maintain the configurations across different services, the central configuration server is used.\nThis serves the configurations to services based on profiles."),(0,i.kt)("p",null,"Read more about central configuration here:\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.xebialabs.com/v.10.2/deploy/concept/central-configuration-overview/"},"https://docs.xebialabs.com/v.10.2/deploy/concept/central-configuration-overview/")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},'deployIntegrationServer {\n    centralConfigurationServer {\n        enable = true\n        httpPort = 8888\n        overlays = [\n                centralConfiguration: [\n                        files("$rootDir/setups/external-cc-itest/deploy-client.yaml")\n                ]\n        ]\n        yamlPatches = [\n                \'centralConfiguration/deploy-server.yaml\': [\n                        \'deploy.server.label\': \'Deploy Hello World\'\n                ],\n                "centralConfiguration/deploy-repository.yaml": [\n                        "xl.repository.artifacts.allow-move": true,\n                        "xl.repository.artifacts.type"      : "db"\n                ]\n        ]\n    }\n}\n')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"enable"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"false"),(0,i.kt)("td",{parentName:"tr",align:"center"},"If you need the Central Configuration Server, this should be true.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"httpPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Random port"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The HTTP port for Central Configuration Server.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"overlays"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"#overlays"},"Read about this section below"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"version"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"It can be specified in several ways. Or as a gradle property ",(0,i.kt)("inlineCode",{parentName:"td"},"centralConfigurationVersion"),", via parameter or in ",(0,i.kt)("inlineCode",{parentName:"td"},"gradle.properties")," file or explicitly via this field.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"yamlPatches"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"#yaml-patches"},"Read about this section below"))))),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Docker based setup currently don't support Central Configuration Server."))),(0,i.kt)("h2",{id:"satellites-section"},"Satellites section"),(0,i.kt)("p",null,"In comparison with workers, the goal for a satellite is to perform deployments on the different network with Deploy. When\nthe connection between networks is not fast and less reliable. ",(0,i.kt)("br",null)),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Integration Server")," at this moment doesn't simulate slow network, but rather allows you to test that the functionality\nproperly works on a satellite. A satellite itself is installed on the same VM. ",(0,i.kt)("br",null)),(0,i.kt)("p",null,"You can read more about a satellite here:\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.xebialabs.com/v.10.2/deploy/concept/getting-started-with-the-satellite-module/"},"https://docs.xebialabs.com/v.10.2/deploy/concept/getting-started-with-the-satellite-module/")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},'deployIntegrationServer {\n    satellites {\n       satellite01 {  // The name of the section, you can name it as you wish\n            pekkoStreamingPort = 8481\n            debugPort = 5008\n            debugSuspend = true\n            metricsPort = 8081\n            overlays = [\n                lib              : [files("src/test/resources/my-library.jar")],\n                ext              : ["src/test/resources/synthetic.xml"]\n            ]      \n            serverPekkoBindHostName = "0.0.0.0"\n            serverPekkoHostname = "127.0.0.1"\n            serverPekkoPort = 8381 \n            stdoutFileName = "satellite-startup.log"\n            syncPlugins = false\n            version = "10.2.2"\n       }   \n    }\n}\n')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"pekkoStreamingPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"8480"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Streaming Pekko port between Satellite and Server")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Remote Debug Port for a satellite.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"debugSuspend"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Suspend the start of the process before the remoting tool is attached.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"metricsPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"8080"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Port for gathered (JMX) metrics on Satellite")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"overlays"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Identical to Server overlays, only in a satellite. ",(0,i.kt)("a",{parentName:"td",href:"#overlays"},"Read about this section below"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"serverPekkoBindHostName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"0.0.0.0"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Pekko bind host name of the Server")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"serverPekkoHostname"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"127.0.0.1"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Pekko host name of the Server")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"serverPekkoPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"8380"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Pekko port between Satellite and Server")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"stdoutFileName"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The filename that stores standard output and error for server runtime. If not present output is discarded.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"syncPlugins"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"true"),(0,i.kt)("td",{parentName:"tr",align:"center"},"If true, plugins will be synchronized from the server.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"version"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"It can be specified in several ways. Or as a gradle property ",(0,i.kt)("inlineCode",{parentName:"td"},"xlSatelliteVersion"),", via parameter or in ",(0,i.kt)("inlineCode",{parentName:"td"},"gradle.properties")," file or explicitly via this field.")))),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Docker based setup currently don't support satellites. "))),(0,i.kt)("h2",{id:"mq-driver-versions"},"MQ Driver Versions"),(0,i.kt)("p",null,"Message Queue Drivers are by default chosen by the plugin, you can change that, and this is exactly what this section about."),(0,i.kt)("p",null,"That's how your can override it: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},"deployIntegrationServer {\n    mqDriverVersions {\n        [\n            'activemq': '5.16.2',\n            'rabbitmq': '2.2.0'\n        ]\n    }\n}\n")),(0,i.kt)("p",null,"In this sample you can see the default values used in the plugin."),(0,i.kt)("h3",{id:"operator-server-section"},"Operator server section"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"dockerImage"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Required"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"It has to be specified explicitly. In case of no value provided, it will be the same as cluster Deploy version")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"httpPort"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Random port"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Public http port for Deploy server. Can be useful in case of troubleshooting of the failed deployment of operator.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"pingRetrySleepTime"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"10"),(0,i.kt)("td",{parentName:"tr",align:"center"},"During the startup of the server we check when it's completely booted. This property configures how long to sleep (in seconds) between retries.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"pingTotalTries"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"60"),(0,i.kt)("td",{parentName:"tr",align:"center"},"During the startup of the server we check when it's completely booted. This property configures how many times to retry.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"version"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"It has to be specified explicitly. In case of no value provided, it will be the same as cluster Deploy version")))),(0,i.kt)("h2",{id:"xld-integration-server-data-version"},"XLD Integration Server Data Version"),(0,i.kt)("p",null,"Currently, this is used only internally in Digital.ai to point to a package with imported data. ",(0,i.kt)("br",null),"\nBefore server starts, database is going to be populated by the imported data, to save the time during test run."),(0,i.kt)("h2",{id:"cache-server"},"Cache Server"),(0,i.kt)("p",null,"We can use a standalone cache server to be used with Deploy master/worker. Only Infinispan Cache Server is supported for now.\nIn order to use the cache server, set the ",(0,i.kt)("inlineCode",{parentName:"p"},"useCache")," project property as true.\nIn addition to the ",(0,i.kt)("inlineCode",{parentName:"p"},"useCache")," property, the cache server will be started only\nif there are more than one Deploy Servers or Deploy Worker.\nThe Infinispan Cache Server by default will be started on ",(0,i.kt)("inlineCode",{parentName:"p"},"11222"),"  port.\nYou can change this by passing a specific port through the ",(0,i.kt)("inlineCode",{parentName:"p"},"cachePort")," project property. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},'deployIntegrationServer {\n    servers {\n      controlPlane {\n        ...\n        overlays = [\n            conf                  : [\n                files("src/test/resources/infinispan-hotrod.properties")\n            ],\n            centralConfiguration: [\n                files("src/test/resources/deploy-caches.yaml")\n            ]\n        ]\n      }\n    }\n    workers {\n      worker01 {\n        ...\n    }\n  }\n}\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Adding infinispan-hotrod.properties  to conf dir makes it available in class path (can be done in otherways too)"),(0,i.kt)("li",{parentName:"ul"},"Modify deploy-caches.yaml as per need to enable/disable specific caches and specify the configuration file name for infinispan")),(0,i.kt)("h2",{id:"tests-section"},"Tests section"),(0,i.kt)("p",null,"You can create Jython based tests and communicate with Deploy through CLI."),(0,i.kt)("p",null,"To run tests you have to run ",(0,i.kt)("inlineCode",{parentName:"p"},"./gradlew integrationTests"),". It is not a part of ",(0,i.kt)("inlineCode",{parentName:"p"},"startIntegrationServer")," intentionally.\nThe server start up takes time, especially if also workers and satellites are configured. During development of the tests, you don't want\nto reboot it every time, but rather run tests against the configured instance. "),(0,i.kt)("p",null,"Therefore first you run the server with ",(0,i.kt)("inlineCode",{parentName:"p"},"./gradlew clean startIntegrationServer")," and the you can run multiple times ",(0,i.kt)("inlineCode",{parentName:"p"},"./gradlew integrationTests"),". "),(0,i.kt)("p",null,"You can also run both commands in one command as: ",(0,i.kt)("inlineCode",{parentName:"p"},"./gradlew clean startIntegrationServer integrationTests"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},'deployIntegrationServer {\n    tests {\n        base {\n            base = true\n            extraClassPath = [file("src/test/resources")]\n            scriptPattern = /\\/jython\\/ci\\/(.+).py$/\n        }\n        testGroupO1 { // The name of the section, you can name it as you wish\n            baseDirectory = file("src/test")\n            extraClassPath = [file("src/test/resources/group-01")]\n            scriptPattern = /\\/jython\\/ci\\/group-01\\/(.+).py$/\n            setupScripts = ["provision/setup.py", "provision/azure/setup.py"]\n            systemProperties = [\n                    \'key1\': \'value1\',\n                    \'key2\': \'value2\',\n            ]\n            tearDownScripts = ["provision/azure/teardown.py", "provision/teardown.py"]\n        }\n    }\n}\n')),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"base"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"false")),(0,i.kt)("td",{parentName:"tr",align:"center"},"If to define ",(0,i.kt)("inlineCode",{parentName:"td"},"base")," test section, it will be not executable, but sharing the same configuration across all executable test sections. If same property is defined in test section itself, it overrides base defined property.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"baseDirectory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Mandatory"),(0,i.kt)("td",{parentName:"tr",align:"center"},"None"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You have to specify here the base directory where your test setup is located.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"extraClassPath"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can point to a folder with your Jython utility scripts which you would like to use in other scripts to eliminate code duplication.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"scriptPattern"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"/(.+)","[.]","(py ","|"," cli)/"),(0,i.kt)("td",{parentName:"tr",align:"center"},"The pattern which will filter the tests you want to run. By default it will run all tests which have extension ",(0,i.kt)("inlineCode",{parentName:"td"},"py")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"cli")," and reside inside base directory.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"setupScripts"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Provision scripts which will be triggered before running all tests.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"systemProperties"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[:]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"You can provide system properties inside your tests and then access it like ",(0,i.kt)("inlineCode",{parentName:"td"},'System.getProperty("key1")'))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"tearDownScripts"),(0,i.kt)("td",{parentName:"tr",align:"center"},"Optional"),(0,i.kt)("td",{parentName:"tr",align:"center"},"[]"),(0,i.kt)("td",{parentName:"tr",align:"center"},"As the best practice to clean everything created by test(s), these scripts is exactly the place to do it. It will be triggered regardless if test was successful or not.")))))}m.isMDXComponent=!0},2114:function(e,t,a){t.Z=a.p+"assets/images/cluster-debug-docker-ps-6acefdcdd5c6dd0f91ef89ef6914c86c.png"},1783:function(e,t,a){t.Z=a.p+"assets/images/yaml-patch-example-5db185920b7e8925c5751eeb18c131f7.png"}}]);