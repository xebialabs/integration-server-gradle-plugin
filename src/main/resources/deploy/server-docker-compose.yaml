version: "3.3"

services:
  deploy-DEPLOY_VERSION:
    image: DEPLOY_IMAGE_VERSION
    container_name: deploy-DEPLOY_VERSION
    environment:
      ADMIN_PASSWORD: admin
      ACCEPT_EULA: 'Y'
      GENERATE_XL_CONFIG: "false"
      PLUGINS_TO_EXCLUDE: DEPLOY_PLUGINS_TO_EXCLUDE
      REPOSITORY_KEYSTORE_PASSPHRASE=deployit
      CENTRAL_CONFIG_ENCRYPT_KEY=changeme
      REPOSITORY_KEYSTORE=zs7OzgAAAAIAAAABAAAAAwAWZGVwbG95aXQtcGFzc3N3b3JkLWtleQAAAX0FGMZRrO0ABXNyADNjb20uc3VuLmNyeXB0by5wcm92aWRlci5TZWFsZWRPYmplY3RGb3JLZXlQcm90ZWN0b3LNV8pZ5zC7UwIAAHhyABlqYXZheC5jcnlwdG8uU2VhbGVkT2JqZWN0PjY9psO3VHACAARbAA1lbmNvZGVkUGFyYW1zdAACW0JbABBlbmNyeXB0ZWRDb250ZW50cQB+AAJMAAlwYXJhbXNBbGd0ABJMamF2YS9sYW5nL1N0cmluZztMAAdzZWFsQWxncQB+AAN4cHVyAAJbQqzzF/gGCFTgAgAAeHAAAAARMA8ECHAyz3pefALRAgMDDUB1cQB+AAUAAACQb6Y2JUQqkd5PtdwIAKEWNiVMcTnIS85U7FsvOb+b+xfOCV8+disezZCQ2f4F6YVGRO++u+NXd0YNDn/eXwge4w7i4ewNBydpMSTpVJieJA3nhh7mvUktatsAV+H7EcGYeMPx/cAlkqyFUHuiGz9p1ft3pxmxey2Uyt/FiBgAiV2hZAj14vGdSoRsMH8qN5ECdAAWUEJFV2l0aE1ENUFuZFRyaXBsZURFU3QAFlBCRVdpdGhNRDVBbmRUcmlwbGVERVO9rqwVmysM6czWLFdUj1+Xh1hxHQ==

    ports:
      - DEPLOY_SERVER_HTTP_PORT:DEPLOY_SERVER_HTTP_PORT
    volumes:
      - ./centralConfiguration:/opt/xebialabs/xl-deploy-server/centralConfiguration
      - ./hotfix/lib:/opt/xebialabs/xl-deploy-server/hotfix/lib
      - ./hotfix/plugins:/opt/xebialabs/xl-deploy-server/hotfix/plugins
      - ./plugins:/opt/xebialabs/xl-deploy-server/plugins
